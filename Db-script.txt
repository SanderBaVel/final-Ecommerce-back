DROP TABLE CLIENTES;
DROP TABLE PEDIDOS;
DROP TABLE PRODUCTOS;
DROP TABLE ESTATUS_PEDIDOS;
DROP TABLE PEDIDOS_PRODUCTOS;


CREATE SEQUENCE CLIENTES_SEQ 
START WITH 1
INCREMENT BY 1
NOCACHE 
NOCYCLE;


CREATE SEQUENCE PEDIDOS_SEQ
START WITH 1
INCREMENT BY 1
NOCACHE 
NOCYCLE;

CREATE SEQUENCE ESTATUS_SEQ
START WITH 1
INCREMENT BY 1
NOCACHE 
NOCYCLE;

CREATE SEQUENCE PRODUCTOS_SEQ
START WITH 1 
INCREMENT BY 1
NOCACHE
NOCYCLE;

CREATE SEQUENCE PEDIDOS_PRODUCTOS_SEQ
START WITH 1
INCREMENT BY 1
NOCACHE 
NOCYCLE;

CREATE TABLE CLIENTES(
ID_CLIENTE NUMBER DEFAULT CLIENTES_SEQ.NEXTVAL PRIMARY KEY,
NOMBRE VARCHAR2(100)NOT NULL,
APELLIDOS VARCHAR2(100) NOT NULL,
EMAIL VARCHAR2(100) NOT NULL UNIQUE,
TELEFONO VARCHAR2(20)NOT NULL UNIQUE,
DIRECCION VARCHAR2(100)
);


CREATE TABLE PEDIDOS(
ID_PEDIDO NUMBER DEFAULT PEDIDOS_SEQ.NEXTVAL PRIMARY KEY,
ID_CLIENTE NUMBER NOT NULL,
ID_ESTATUS NUMBER NOT NULL,
TOTAL NUMBER (10,2) NOT NULL,
FECHA_CREACION DATE,

CONSTRAINT FK_PEDIDOS_CLIENTES FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTES(ID_CLIENTE),
CONSTRAINT FK__PEDIDOS_ESTATUS FOREIGN KEY (ID_ESTATUS) REFERENCES ESTATUS_PEDIDOS(ID_ESTATUS)
);


CREATE TABLE ESTATUS_PEDIDOS(
ID_ESTATUS NUMBER DEFAULT ESTATUS_SEQ.NEXTVAL PRIMARY KEY,
DESCRIPCION VARCHAR2(20) NOT NULL
);

CREATE TABLE PRODUCTOS (
ID_PRODUCTO NUMBER DEFAULT PRODUCTOS_SEQ.NEXTVAL PRIMARY KEY,
NOMBRE VARCHAR2 (100) NOT NULL,
DESCRIPCION VARCHAR (100) NOT NULL,
PRECIO NUMBER (10,2) NOT NULL CHECK(PRECIO >= 0),
STOCK NUMBER (10,2) NOT NULL CHECK (STOCK >= 0)
)

CREATE TABLE PEDIDIOS_PRODUCTOS(
ID_PEDIDIO_PRODUCTO DEFAULT PEDIDOS_PRODUCTOS_SEQ.NEXTVAL PRIMARY KEY,
ID_PRODUCTO NUMBER,
ID_PEDIDO NUMBER,

CONSTRAINT FK_PEDIDOS_PRODUCTOS_PEDIDOS FOREIGN KEY (ID_PEDIDO) REFERENCES PEDIDOS(ID_PEDIDO),
CONSTRAINT FK_PEDIDOS_PRODUCTOS_PRODUCTO FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTOS(ID_PRODUCTO)
)